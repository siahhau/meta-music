import { m } from 'framer-motion';
import { varAlpha } from 'minimal-shared/utils';

import Box from '@mui/material/Box';
import Grid from '@mui/material/Grid';
import Stack from '@mui/material/Stack';
import SvgIcon from '@mui/material/SvgIcon';
import Container from '@mui/material/Container';
import Typography from '@mui/material/Typography';

import { CONFIG } from 'src/global-config';

import { varFade, MotionViewport } from 'src/components/animate';

import { SectionTitle } from './components/section-title';
import { CircleSvg, FloatLine, FloatPlusIcon } from './components/svg-elements';

// ----------------------------------------------------------------------

// 渲染装饰线条和图标
const renderLines = () => (
  <>
    <FloatPlusIcon sx={{ top: 72, left: 72 }} />
    <FloatPlusIcon sx={{ bottom: 72, left: 72 }} />
    <FloatLine sx={{ top: 80, left: 0 }} />
    <FloatLine sx={{ bottom: 80, left: 0 }} />
    <FloatLine vertical sx={{ top: 0, left: 80 }} />
  </>
);

// 主组件：乐谱库首页音乐功能区
export function HomeMusicFeatures({ sx, ...other }) {
  // 渲染描述
  const renderDescription = () => (
    <>
      <SectionTitle
        caption="音乐创作核心"
        title="乐谱库的"
        txtGradient="特色"
        sx={{ mb: { xs: 5, md: 8 }, textAlign: { xs: 'center', md: 'left' } }}
      />

      <Stack spacing={6} sx={{ maxWidth: { sm: 560, md: 400 }, mx: { xs: 'auto', md: 'unset' } }}>
        {ITEMS.map((item) => (
          <Box
            component={m.div}
            variants={varFade('inUp', { distance: 24 })}
            key={item.title}
            sx={[{ gap: 3, display: 'flex' }]}
          >
            <SvgIcon sx={{ width: 40, height: 40 }}>{item.icon}</SvgIcon>
            <Stack spacing={1}>
              <Typography variant="h5" component="h6">
                {item.title}
              </Typography>
              <Typography sx={{ color: 'text.secondary' }}>{item.description}</Typography>
            </Stack>
          </Box>
        ))}
      </Stack>
    </>
  );

  // 渲染插图
  const renderImage = () => (
    <Stack
      component={m.div}
      variants={varFade('inRight', { distance: 24 })}
      sx={{
        height: 1,
        alignItems: 'center',
        position: 'relative',
        justifyContent: 'center',
      }}
    >
      <Box
        sx={[
          (theme) => ({
            left: 0,
            width: 720,
            borderRadius: 2,
            position: 'absolute',
            bgcolor: 'background.default',
            boxShadow: `-40px 40px 80px 0px ${varAlpha(
              theme.vars.palette.grey['500Channel'],
              0.16
            )}`,
            ...theme.applyStyles('dark', {
              boxShadow: `-40px 40px 80px 0px ${varAlpha(
                theme.vars.palette.common.blackChannel,
                0.16
              )}`,
            }),
          }),
        ]}
      >
        <Box
          component="img"
          alt="乐谱创作插图"
          src={`${CONFIG.assetsDir}/assets/images/home/music-score-chart.webp`}
          sx={{ width: 720 }}
        />
      </Box>
    </Stack>
  );

  return (
    <Box
      component="section"
      sx={[
        {
          overflow: 'hidden',
          position: 'relative',
          py: { xs: 10, md: 20 },
        },
        ...(Array.isArray(sx) ? sx : [sx]),
      ]}
      {...other}
    >
      <MotionViewport>
        {renderLines()}

        <Container sx={{ position: 'relative' }}>
          <Grid container columnSpacing={{ xs: 0, md: 8 }} sx={{ position: 'relative', zIndex: 9 }}>
            <Grid size={{ xs: 12, md: 6, lg: 7 }}>{renderDescription()}</Grid>

            <Grid sx={{ display: { xs: 'none', md: 'block' } }} size={{ md: 6, lg: 5 }}>
              {renderImage()}
            </Grid>
          </Grid>

          <CircleSvg variants={varFade('in')} sx={{ display: { xs: 'none', md: 'block' } }} />
        </Container>
      </MotionViewport>
    </Box>
  );
}

// ----------------------------------------------------------------------

// 功能项数据，改编为乐谱库相关
const ITEMS = [
  {
    title: '品牌定制',
    description: '一致的设计风格，便于打造个性化音乐创作界面。',
    icon: (
      <svg
        width="48"
        height="48"
        viewBox="0 0 48 48"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          opacity="0.48"
          d="M17.2978 43.8278L17.0351 44.2607C17.0351 44.2607 5.35059 44.8621 5.35059 37.1297C5.35059 29.2255 15.5845 25.7636 18.7534 24.672C19.4455 24.4336 20.6797 24.0861 22.1858 23.606C22.4107 24.0828 22.6296 24.5622 22.8435 25.0437C18.9084 26.4527 10.5055 29.9674 10.5055 37.1297C10.5055 41.4168 14.097 43.1414 17.2978 43.8278ZM29.1018 43.2164L30.7236 35.8699C31.138 33.7964 32.1571 31.892 33.6523 30.3968L36.6943 27.3547C35.395 27.2366 34.0548 27.6745 33.0602 28.6691L27.81 33.9193C26.3148 35.4145 25.2958 37.3189 24.8813 39.3924L23.9083 44.2607C23.9083 44.2607 28.9938 43.2414 29.1018 43.2164Z"
          fill="currentColor"
        />
        <path
          d="M44.151 24.0171C42.9664 22.8325 41.3914 22.1802 39.7162 22.1802C38.0409 22.1802 36.4659 22.8325 35.2813 24.0171L26.5945 32.7039C24.8536 34.4449 23.6785 36.6412 23.1959 39.0553L22.2228 43.9236C22.1102 44.4869 22.2866 45.0692 22.6928 45.4755C23.0182 45.8008 23.4567 45.9787 23.9079 45.9787C24.0199 45.9787 24.1326 45.9678 24.2447 45.9453L29.113 44.9723C31.5271 44.4898 33.7233 43.3145 35.4643 41.5736L44.151 32.8868C45.3356 31.7022 45.9881 30.1272 45.9881 28.452C45.9881 26.7767 45.3356 25.2017 44.151 24.0171ZM41.7209 30.4567L33.0341 39.1435C31.7747 40.403 30.1859 41.2533 28.4394 41.6022L26.0979 42.0702L26.5659 39.7288C26.915 37.9823 27.7651 36.3935 29.0246 35.134L37.7114 26.4472C38.2469 25.9117 38.9589 25.6168 39.7162 25.6168C40.4734 25.6168 41.1855 25.9117 41.721 26.4472C42.2564 26.9827 42.5514 27.6947 42.5514 28.452C42.5514 29.2092 42.2565 29.9213 41.7209 30.4567Z"
          fill="currentColor"
        />
        <path
          d="M20.545 25.9003C20.0436 26.058 19.535 26.2202 19.238 26.3224C16.2283 27.3588 7.06942 30.5125 7.06942 37.1295C7.06942 38.4088 7.4831 39.4248 8.33418 40.2353C10.5699 42.3648 15.3125 42.6242 16.9496 42.5443C17.8983 42.4971 18.7031 43.2278 18.7505 44.1746C18.798 45.1215 18.0708 45.9278 17.1239 45.9766C17.0738 45.9792 16.8341 45.9902 16.452 45.9902C14.549 45.9902 9.11231 45.7143 5.97211 42.7315C4.41997 41.2572 3.63281 39.3724 3.63281 37.1295C3.63281 34.9612 4.28156 32.9196 5.56084 31.0614C6.58237 29.5779 8.01844 28.2018 9.82953 26.9714C12.9445 24.8549 16.5146 23.6256 18.1942 23.0473C18.5351 22.9298 18.9888 22.7872 19.5141 22.622C21.8606 21.8841 25.7878 20.649 29.1565 18.7732C32.8575 16.7124 34.734 14.5238 34.734 12.2682C34.734 9.69399 33.5144 8.06822 32.4911 7.15769C31.3098 6.10617 29.6946 5.42684 28.3764 5.42684C27.4274 5.42684 26.6581 4.65756 26.6581 3.70854C26.6581 2.75952 27.4274 1.99023 28.3764 1.99023C30.554 1.99023 32.9463 2.96219 34.7758 4.59029C36.965 6.5385 38.1707 9.26519 38.1707 12.2681C38.1707 20.3574 25.8194 24.2416 20.545 25.9003Z"
          fill="currentColor"
        />
        <path
          d="M11.4507 12.6437C7.83201 12.6437 5.62047 11.1071 4.40245 9.81805C2.87573 8.20216 2 5.97532 2 3.70854C2 2.75952 2.76928 1.99023 3.7183 1.99023C4.66732 1.99023 5.43661 2.75952 5.43661 3.70854C5.43661 6.35679 7.31858 9.20711 11.4507 9.20711C14.4195 9.20711 16.2937 7.73315 18.4639 6.02644C19.1366 5.49746 19.832 4.95053 20.5783 4.43658C21.3599 3.89841 22.4298 4.0955 22.9681 4.87707C23.5064 5.65864 23.3092 6.72854 22.5276 7.2668C21.8708 7.71914 21.2478 8.20903 20.5883 8.72779C18.2544 10.5633 15.609 12.6437 11.4507 12.6437Z"
          fill="currentColor"
        />
      </svg>
    ),
  },
  {
    title: '音符与和弦编辑',
    description: '基于模块化设计，轻松创建复杂的音乐结构。',
    icon: (
      <svg
        width="48"
        height="48"
        viewBox="0 0 48 48"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          opacity="0.48"
          d="M24 36C30.6274 36 36 30.6274 36 24C36 17.3726 30.6274 12 24 12C17.3726 12 12 17.3726 12 24C12 30.6274 17.3726 36 24 36ZM24 16C28.4183 16 32 19.5817 32 24C32 28.4183 28.4183 32 24 32C19.5817 32 16 28.4183 16 24C16 19.5817 19.5817 16 24 16Z"
          fill="currentColor"
        />
        <path
          d="M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44ZM24 8C32.8366 8 40 15.1634 40 24C40 32.8366 32.8366 40 24 40C15.1634 40 8 32.8366 8 24C8 15.1634 15.1634 8 24 8Z"
          fill="currentColor"
        />
        <path
          d="M28 24C28 26.2091 26.2091 28 24 28C21.7909 28 20 26.2091 20 24C20 21.7909 21.7909 20 24 20C26.2091 20 28 21.7909 28 24ZM24 24L32 20V28L24 24Z"
          fill="currentColor"
        />
      </svg>
    ),
  },
  {
    title: '音乐开发',
    description: '易于定制和扩展，节省您的创作时间和成本。',
    icon: (
      <svg
        width="48"
        height="48"
        viewBox="0 0 48 48"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          opacity="0.48"
          d="M9.04688 27.4V13.2992C9.04688 8.55495 12.8835 4.70898 17.6162 4.70898H12.3984C7.6522 4.70898 3.80469 8.55649 3.80469 13.3027V27.3965C3.80469 32.1426 7.6522 35.9902 12.3984 35.9902H17.6162C12.8835 35.9902 9.04688 32.1443 9.04688 27.4Z"
          fill="currentColor"
        />
        <path
          d="M32.25 44.584H15.75C13.472 44.4995 13.4737 41.2302 15.75 41.1465H32.25C34.528 41.231 34.5263 44.5003 32.25 44.584ZM35.6875 37.709H12.3107C6.62541 37.709 2 33.0837 2 27.3983V13.3027C2 7.61642 6.62619 2.99023 12.3125 2.99023H35.6875C41.3738 2.99023 46 7.61642 46 13.3027V27.3965C46 33.0828 41.3738 37.709 35.6875 37.709ZM12.3125 6.42773C8.52163 6.42773 5.4375 9.51186 5.4375 13.3027V27.3983C5.4375 31.1881 8.52085 34.2715 12.3107 34.2715H35.6875C39.4784 34.2715 42.5625 31.1874 42.5625 27.3965V13.3027C42.5625 9.51186 39.4784 6.42773 35.6875 6.42773H12.3125Z"
          fill="currentColor"
        />
        <path
          d="M22.1107 29.0297C21.9535 29.0297 21.7937 29.008 21.635 28.9624C20.7227 28.7001 20.1958 27.748 20.4581 26.8357L24.4112 13.0857C24.6735 12.1734 25.6258 11.6469 26.538 11.9088C27.4502 12.1711 27.9772 13.1232 27.7149 14.0355L23.7618 27.7855C23.545 28.539 22.8575 29.0297 22.1107 29.0297ZM32.4224 27.3106C31.978 27.3106 31.5338 27.1393 31.1974 26.7974C30.5316 26.1208 30.5402 25.0326 31.2168 24.3668L34.5819 21.0551C34.9162 20.6941 34.9163 20.2198 34.5791 19.8587L31.2086 16.4961C30.5365 15.8256 30.5353 14.7374 31.2057 14.0654C31.8762 13.3933 32.9645 13.3922 33.6364 14.0625L37.0066 17.4247C38.6751 19.0208 38.6751 21.8961 37.0062 23.4922C37.0036 23.4948 37.0009 23.4975 36.9983 23.5001L33.6281 26.8169C33.2933 27.1462 32.8577 27.3106 32.4224 27.3106ZM15.7504 27.3106C15.3151 27.3106 14.8797 27.1462 14.5449 26.8168L11.1747 23.5C11.172 23.4974 11.1693 23.4948 11.1668 23.4921C9.49776 21.8956 9.49784 19.0207 11.1668 17.4244L14.5365 14.0625C15.2086 13.3921 16.2968 13.3935 16.9672 14.0654C17.6376 14.7374 17.6364 15.8256 16.9644 16.4961L13.5941 19.8583C13.2569 20.2193 13.2562 20.6934 13.591 21.0551L16.956 24.3668C17.6326 25.0326 17.6413 26.1208 16.9754 26.7974C16.6391 27.1392 16.1948 27.3106 15.7504 27.3106Z"
          fill="currentColor"
        />
      </svg>
    ),
  },
];
